    <!DOCTYPE html>
    <html lang="en">
    <head>
        <!-- 
        This is an HTML comment
        You can write text in a comment and the content won't be visible in the page
        -->

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="https://glitch.com/favicon.ico" />

        <!--
        This is the page head - it contains info the browser uses
        Like the title, which appears on the browser tab but not inside the page
        Further down you'll see the content that displays in the page
        -->
        <title>Hello World!</title>

        <!-- The website stylesheet -->
        <link rel="stylesheet" href="/style.css" />

        <!-- The website JavaScript file -->
        <script src="/script.js" defer></script>
    </head>
    <body>
        <!--
        The body includes the content you see in the page
        Each element is defined using tags, like this <div></div>
        The attributes like class="wrapper" let us style elements in the CSS
        -->
        <div class="wrapper">
        <div class="content" role="main">
            <h1 class="title">Marin Mountain Bike</h1>
            <picture id="fullscreenTarget">

                <source srcset="./images/sonoma.heic" type="images/heic">
                <img src="images/MarinBikeSM.png"
                alt="View from the bike rack"
                class="illustration" >
            </picture>
            <div class="instructions">
            <h2>Using this project</h2>
            <p>
                This is the Glitch <strong>Hello Website</strong> project. You can
                use it to build your own site. Check out the code in the editor and open
                the <span class="fileopener" data-file="TODO.md" data-line="0"
                >TODO</span> for next steps!
            </p>
            <!--  ðŸš§ TODO: ADD BUTTON HERE -->

            <!-- Once you've added the button from TODO.md, click it in the page -->
            <!-- Check out the function in script.js to see how it works -->
            </div>
        </div>
        </div>
    </body>
    <script>
        const fullscreenTarget = document.getElementById('fullscreenTarget');
const heicSource = fullscreenTarget.querySelector('source');
const fallbackImage = fullscreenTarget.querySelector('img');

fullscreenTarget.addEventListener('click', async event => {
  try {
    // Create a new image element for the HEIC image
    const heicImage = new Image();
    heicImage.src = heicSource.srcset;
    
    // Wait for the HEIC image to load
    await heicImage.decode();
    
    // Replace the content of the picture element with the HEIC image
    fullscreenTarget.innerHTML = '';
    fullscreenTarget.appendChild(heicImage);
    
    // Request fullscreen
    if (fullscreenTarget.requestFullscreen) {
      await fullscreenTarget.requestFullscreen();
    } else if (fullscreenTarget.webkitRequestFullscreen) { // Safari
      await fullscreenTarget.webkitRequestFullscreen();
    }
  } catch(error) {
    console.error('Failed to enter fullscreen mode or load HEIC:', error);
    // If HEIC fails, fallback to PNG
    fullscreenTarget.innerHTML = '';
    fullscreenTarget.appendChild(fallbackImage.cloneNode(true));
    
    // Try fullscreen again with PNG
    if (fullscreenTarget.requestFullscreen) {
      fullscreenTarget.requestFullscreen();
    } else if (fullscreenTarget.webkitRequestFullscreen) { // Safari
      fullscreenTarget.webkitRequestFullscreen();
    }
  }
});

// Restore original picture content when exiting fullscreen
document.addEventListener('fullscreenchange', () => {
  if (!document.fullscreenElement) {
    fullscreenTarget.innerHTML = '';
    fullscreenTarget.appendChild(heicSource.cloneNode(true));
    fullscreenTarget.appendChild(fallbackImage.cloneNode(true));
  }
});
// Restore original picture content when exiting fullscreen
document.addEventListener('fullscreenchange', () => {
  if (!document.fullscreenElement) {
    fullscreenTarget.innerHTML = '';
    fullscreenTarget.appendChild(heicSource.cloneNode(true));
    fullscreenTarget.appendChild(fallbackImage.cloneNode(true));
  }
});
    </script>
    </html>
